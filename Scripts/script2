#!/bin/bash
for jpg; do # использовать $jpg для каждого имени файла по очереди
    png="${jpg%.jpg}.png"                    # получить PNG-версию имени файла .jpg с .png
    echo converting "$jpg" ...               # сообщение для пользователя
    if convert "$jpg" jpg.to.png ; then      # использовать утилиту convert для создания временного PNG-файла
        mv jpg.to.png "$png"                 # если сработало, переименовать временный PNG-файл, дав требуемое имя
    else                                     # ...иначе напечатать сообщение об ошибке
        echo 'jpg2png: ошибка: результат сохранен в "jpg.to.png".' >&2
        exit 1
    fi                                       # конец "if"
done # конец "for"
echo "Успешно преобразовано" # сообщение об успехе
exit 0